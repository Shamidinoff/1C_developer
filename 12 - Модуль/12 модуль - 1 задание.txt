
Процедура ПечатьПеремещенияТоваров_Типовая(ТабДок, Ссылка) Экспорт
	//{{_КОНСТРУКТОР_ПЕЧАТИ(ПечатьПеремещенияТоваров_Типовая)
	Макет = Документы.ПеремещениеТоваров.ПолучитьМакет("ПечатьПеремещенияТоваров_Типовая");
	
	ТабДок = Новый ТабличныйДокумент;
	
	//{{КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ПеремещениеТоваров.Номер КАК Номер,
		|	ПеремещениеТоваров.Дата КАК Дата,
		|	ПеремещениеТоваров.СкладОтправитель КАК СкладОтправитель,
		|	ПеремещениеТоваров.СкладПолучатель КАК СкладПолучатель,
		|	ПеремещениеТоваров.Сотрудник КАК Сотрудник,
		|	ПеремещениеТоваров.Товар.(
		|		НомерСтроки КАК НомерСтроки,
		|		Номенклатура КАК Номенклатура,
		|		Количество КАК Количество,
		|		ЕдиницаИзмерения КАК ЕдиницаИзмерения
		|	) КАК Товар,
		|	ПеремещениеТоваров.Ссылка КАК Ссылка,
		|	НазваниеОрганизация.Значение КАК Организация
		|ИЗ
		|	Документ.ПеремещениеТоваров КАК ПеремещениеТоваров,
		|	Константа.НазваниеОрганизация КАК НазваниеОрганизация";
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Выборка = РезультатЗапроса.Выбрать();
	
	Пока Выборка.Следующий() Цикл
		// Вставить обработку выборки ВыборкаДетальныеЗаписи
	КонецЦикла;
	
	//}}КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА
	
	ОбластьЗаголовок = Макет.ПолучитьОбласть("Заголовок");
	ОбластьШапка = Макет.ПолучитьОбласть("Шапка");
	ОбластьТело = Макет.ПолучитьОбласть("Тело");
	ОбластьПодвал = Макет.ПолучитьОбласть("Подвал");
	
	ОбластьЗаголовок.Параметры.Номер = Выборка.Номер;
	ОбластьЗаголовок.Параметры.Дата = Формат(Выборка.Дата,"ДЛФ=D");
	ТабДок.Вывести(ОбластьЗаголовок);
	
	ОбластьШапка.Параметры.Организация = Выборка.Организация;
	ОбластьШапка.Параметры.СкладОтправитель = Выборка.СкладОтправитель;
	ОбластьШапка.Параметры.СкладПолучатель = Выборка.СкладПолучатель;
	Табдок.Вывести(ОбластьШапка);
	
	ВыборкаТовары = Выборка.Товар.Выбрать();
	Пока ВыборкаТовары.Следующий() Цикл
		ОбластьТело.Параметры.НомерСтроки = Выборка.НомерСтроки;
		ОбластьТело.Параметры.Номенклатура = Выборка.Номенклатура;
		ОбластьТело.Параметры.Количество = Выборка.Количество; 
		ОбластьТело.Параметры.ЕдиницаИзмерения = Выборка.ЕдиницаИзмерения;
		ТабДок.Вывести(ОбластьТело);
	КонецЦикла;
		
	ОбластьПодвал.Параметры.ОтветственноеЛицо = Выборка.Сотрудник; 
	Табдок.Вывести(ОбластьПодвал);  
	
	ВставлятьРазделительСтраниц = Истина;
	ТабДок.АвтоМасштаб = Истина;

	
	КонецПроцедуры
